$(document).ready(function(){$("form").bind("keydown",function(r){13===r.keyCode&&$("#loginBtn").click()}),$("#loginBtn").bind("click",function(){var r=$("#username").val(),o=$("#password").val();if(!r){$("p.login-bg-error").remove();var e='<p class="login-bg-error">请输入用户名，最多16位字符</p>';return void $(".login-bg-btn").before(e)}if(!o){$("p.login-bg-error").remove();var e='<p class="login-bg-error">请输入6~16位密码</p>';return void $(".login-bg-btn").before(e)}if(o.length<6){$("p.login-bg-error").remove();var e='<p class="login-bg-error">请至少输入6位密码</p>';return void $(".login-bg-btn").before(e)}$.ajax({dataType:"json",async:!0,data:{username:r,password:o},type:"POST",beforeSend:function(){},success:function(r){var o="登录失败";if(r){if(0==r.code&&r.userId){var e=location.pathname,n="/"+e.split("/")[1];return window.location=n,0}r.message&&(o=r.message)}$("p.login-bg-error").remove();var i='<p class="login-bg-error">'+o+"</p>";$(".login-bg-btn").before(i)},error:function(){$("p.login-bg-error").remove();$(".login-bg-btn").before('<p class="login-bg-error">请求失败，请重试！</p>')},complete:function(){}})})});